syntax = "proto3";
package pb;

service GueryMaster {
	rpc SendHeartbeat(stream Heartbeat) returns (Empty) {}
	rpc Query(QuerySQL) returns (QueryResponse) {}
}

service GueryExecutor {
	rpc Quit(Empty) returns (Empty) {}
	rpc Duplicate(Empty) returns (Empty) {}	
	rpc SendInstruction(Instruction) returns (Empty) {}
	rpc GetOutputChannelLocation(Location) returns (Location) {}
}

message Empty{}

message Location {
	string dataCenter = 1;
	string rack = 2;
	string address = 3;
	string name = 4;
	int32 port = 5;
	int32 channelIndex = 6;
}

message Heartbeat {
	Location location = 1;
	int32 resource = 2; //0: idle; 1:busy; 
	Instruction instruction = 3;
}

message Instruction {
	int32 taskId = 1;
	int32 taskType = 2;
	string encodedEPlanNodeBytes = 3;
}

message QuerySQL {
	string SQL = 1;
}

message QueryResponse {
	int32 ColumnNumber = 1;
	repeated string ColumnName = 2;
	repeated string ColumnType = 3;
	repeated string ColumnValue = 4;
}

