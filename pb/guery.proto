syntax = "proto3";
package pb;

service GueryMaster {
	rpc SendHeartbeat(stream Heartbeat) returns (Empty) {}
}

service GueryExecutor {
	rpc Quit(Empty) returns (Empty) {}
	rpc Duplicate(Empty) returns (Empty) {}	
	rpc SendInstruction(Instruction) returns (Empty) {}
}

message Empty{}

message Location {
	string dataCenter = 1;
	string rack = 2;
	string address = 3;
	string name = 5;
}

message Heartbeat {
	Location location = 1;
	int32 resource = 2; //0: idle; 1:busy; 
	Instruction instruction = 3;
}

message Instruction {
	int32 taskId = 1;
	int32 taskType = 2;
	repeated Location inputLocations = 3;
	repeated Location outputLocations = 4;
	string encodedPlanNodeBytes = 5;
}

